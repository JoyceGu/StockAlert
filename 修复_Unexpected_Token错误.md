# ä¿®å¤ "Unexpected token '<'" é”™è¯¯

## ğŸ” é”™è¯¯åŸå› 

`Unexpected token '<'` é”™è¯¯é€šå¸¸å‘ç”Ÿåœ¨ï¼š
- APIè¿”å›HTMLï¼ˆå¦‚404é¡µé¢ï¼‰è€Œä¸æ˜¯JSON
- JavaScriptå°è¯•è§£æHTMLä½œä¸ºJSONæ—¶å¤±è´¥
- Vercelè·¯ç”±é…ç½®å¯¼è‡´APIè¯·æ±‚è¢«é‡å®šå‘åˆ°ä¸»é¡µ

---

## âœ… å·²åº”ç”¨çš„ä¿®å¤

### 1. **æ”¹è¿›çš„é”™è¯¯å¤„ç†**
- âœ… æ£€æŸ¥Content-Typeå¤´ï¼Œç¡®ä¿è¿”å›JSON
- âœ… æ›´å¥½çš„é”™è¯¯æ¶ˆæ¯ï¼ˆä¸­æ–‡ï¼‰
- âœ… éªŒè¯è¿”å›æ•°æ®ç»“æ„

### 2. **APIè·¯ç”±ä¼˜åŒ–**
- âœ… æ˜ç¡®è®¾ç½®Content-Typeå¤´
- âœ… APIè·¯ç”±404è¿”å›JSONè€Œä¸æ˜¯HTML
- âœ… ç¡®ä¿è·¯ç”±é¡ºåºæ­£ç¡®

### 3. **Vercelé…ç½®**
- âœ… æ›´æ–°vercel.jsoné…ç½®
- âœ… ç¡®ä¿APIè·¯ç”±ä¼˜å…ˆçº§

---

## ğŸš€ é‡æ–°éƒ¨ç½²æ­¥éª¤

### æ­¥éª¤1ï¼šæäº¤æ›´æ”¹
```bash
git add .
git commit -m "Fix Unexpected token error - improve API error handling"
git push
```

### æ­¥éª¤2ï¼šVercelè‡ªåŠ¨éƒ¨ç½²
- Vercelä¼šè‡ªåŠ¨æ£€æµ‹GitHubæ¨é€
- ç­‰å¾…éƒ¨ç½²å®Œæˆï¼ˆçº¦1-2åˆ†é’Ÿï¼‰

### æ­¥éª¤3ï¼šéªŒè¯ä¿®å¤
è®¿é—®ä½ çš„åº”ç”¨ï¼š
```
https://stock-alert-navy.vercel.app/
```

---

## ğŸ”§ æ‰‹åŠ¨æµ‹è¯•

### æµ‹è¯•1ï¼šå¥åº·æ£€æŸ¥ç«¯ç‚¹
åœ¨æµè§ˆå™¨è®¿é—®ï¼š
```
https://stock-alert-navy.vercel.app/api/health
```

**åº”è¯¥è¿”å›**ï¼š
```json
{
  "status": "OK",
  "timestamp": "...",
  "uptime": ...
}
```

### æµ‹è¯•2ï¼šè‚¡ç¥¨API
è®¿é—®ï¼š
```
https://stock-alert-navy.vercel.app/api/stock/AAPL
```

**åº”è¯¥è¿”å›**ï¼š
```json
{
  "symbol": "AAPL",
  "name": "Apple Inc.",
  "data": [...],
  "currentPrice": ...,
  "change24h": ...
}
```

### æµ‹è¯•3ï¼šä½¿ç”¨æµ‹è¯•é¡µé¢
è®¿é—®ï¼š
```
https://stock-alert-navy.vercel.app/test
```

ä¼šè‡ªåŠ¨æµ‹è¯•æ‰€æœ‰ç«¯ç‚¹å¹¶æ˜¾ç¤ºç»“æœã€‚

---

## ğŸ› å¦‚æœé—®é¢˜ä»ç„¶å­˜åœ¨

### æ£€æŸ¥1ï¼šæµè§ˆå™¨æ§åˆ¶å°
1. æŒ‰F12æ‰“å¼€å¼€å‘è€…å·¥å…·
2. æŸ¥çœ‹Consoleæ ‡ç­¾
3. æŸ¥çœ‹Networkæ ‡ç­¾
4. æ£€æŸ¥ `/api/stock/VOO` è¯·æ±‚ï¼š
   - **çŠ¶æ€ç **ï¼šåº”è¯¥æ˜¯200
   - **Content-Type**ï¼šåº”è¯¥æ˜¯`application/json`
   - **å“åº”**ï¼šåº”è¯¥æ˜¯JSONæ•°æ®

### æ£€æŸ¥2ï¼šVercelå‡½æ•°æ—¥å¿—
1. ç™»å½• [Vercel Dashboard](https://vercel.com/dashboard)
2. é€‰æ‹©ä½ çš„é¡¹ç›®
3. ç‚¹å‡» **Functions** æ ‡ç­¾
4. æŸ¥çœ‹ `server.js` çš„æ—¥å¿—
5. æŸ¥æ‰¾é”™è¯¯ä¿¡æ¯

### æ£€æŸ¥3ï¼šè·¯ç”±é…ç½®
ç¡®ä¿ `vercel.json` æ–‡ä»¶å­˜åœ¨ä¸”å†…å®¹æ­£ç¡®ï¼š
```json
{
  "version": 2,
  "builds": [
    {
      "src": "server.js",
      "use": "@vercel/node"
    }
  ],
  "routes": [
    {
      "src": "/api/(.*)",
      "dest": "/server.js"
    },
    {
      "src": "/(.*)",
      "dest": "/server.js"
    }
  ]
}
```

---

## ğŸ“ å¸¸è§é—®é¢˜

### Q: APIä»ç„¶è¿”å›HTML
**A**: 
1. æ£€æŸ¥Verceléƒ¨ç½²æ˜¯å¦æˆåŠŸ
2. æ¸…é™¤æµè§ˆå™¨ç¼“å­˜
3. å°è¯•å¼ºåˆ¶é‡æ–°éƒ¨ç½²ï¼š`vercel --force`

### Q: éƒ¨åˆ†è‚¡ç¥¨åŠ è½½å¤±è´¥
**A**: 
- è¿™æ˜¯æ­£å¸¸çš„ï¼ŒæŸäº›è‚¡ç¥¨å¯èƒ½æš‚æ—¶æ— æ³•è·å–æ•°æ®
- åº”ç”¨ä¼šæ˜¾ç¤ºå·²æˆåŠŸåŠ è½½çš„è‚¡ç¥¨
- æŸ¥çœ‹æ§åˆ¶å°äº†è§£å…·ä½“å“ªäº›è‚¡ç¥¨å¤±è´¥

### Q: å›¾è¡¨ä»ç„¶ä¸æ˜¾ç¤º
**A**: 
1. ç¡®ä¿è‡³å°‘æœ‰ä¸€ä¸ªè‚¡ç¥¨æˆåŠŸåŠ è½½
2. æ£€æŸ¥Chart.jsåº“æ˜¯å¦åŠ è½½ï¼ˆNetworkæ ‡ç­¾ï¼‰
3. æŸ¥çœ‹æ§åˆ¶å°æ˜¯å¦æœ‰JavaScripté”™è¯¯

---

## âœ… éªŒè¯æ¸…å•

éƒ¨ç½²åæ£€æŸ¥ï¼š

- [ ] `/api/health` è¿”å›JSON
- [ ] `/api/stock/AAPL` è¿”å›è‚¡ç¥¨æ•°æ®JSON
- [ ] æµè§ˆå™¨æ§åˆ¶å°æ—  "Unexpected token" é”™è¯¯
- [ ] Networkæ ‡ç­¾æ˜¾ç¤ºAPIè¯·æ±‚Content-Typeä¸º`application/json`
- [ ] è‡³å°‘éƒ¨åˆ†è‚¡ç¥¨æ•°æ®åŠ è½½æˆåŠŸ
- [ ] å›¾è¡¨æ˜¾ç¤ºï¼ˆå¦‚æœæœ‰æ•°æ®ï¼‰

---

## ğŸ†˜ å¦‚æœä»ç„¶æ— æ³•è§£å†³

### æ­¥éª¤1ï¼šæ£€æŸ¥Vercelç¯å¢ƒ
```bash
# æœ¬åœ°æµ‹è¯•Vercelç¯å¢ƒ
vercel dev
```

### æ­¥éª¤2ï¼šæŸ¥çœ‹è¯¦ç»†æ—¥å¿—
åœ¨Vercel Dashboard â†’ Functions â†’ server.js â†’ Logs

### æ­¥éª¤3ï¼šç®€åŒ–æµ‹è¯•
åˆ›å»ºä¸€ä¸ªæœ€å°æµ‹è¯•ï¼š
```javascript
// åœ¨server.jsä¸­æ·»åŠ 
app.get('/api/test', (req, res) => {
    res.setHeader('Content-Type', 'application/json');
    res.json({ message: 'API is working!' });
});
```

è®¿é—® `https://your-app.vercel.app/api/test`

å¦‚æœè¿™ä¸ªå·¥ä½œï¼Œè¯´æ˜è·¯ç”±é…ç½®æ­£ç¡®ï¼Œé—®é¢˜åœ¨è‚¡ç¥¨APIã€‚

---

**æŒ‰ç…§ä»¥ä¸Šæ­¥éª¤é‡æ–°éƒ¨ç½²ï¼Œé”™è¯¯åº”è¯¥ä¼šè§£å†³ï¼** ğŸš€
